(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,a){e.exports=a(71)},42:function(e,t,a){},62:function(e,t,a){},64:function(e,t,a){},66:function(e,t,a){},68:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(22),c=a.n(s),i=(a(40),a(42),a(73)),l=a(76),o=a(75),m=a(6),u=a(14),p=a(34),d=a(4),f="SET_LOGGED_CUSTOMER",g="CLEAR_LOGGED_CUSTOMER",h="CUSTOMER_LOGIN_PENDING";var E={pending:!1,logged:!1},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(d.a)({},e,{logged:!0,pending:!1,customer:Object(d.a)({},t.payload)});case h:return Object(d.a)({},e,{pending:!0});case g:return Object(d.a)({},e,{logged:!1,customer:null,pending:!1});default:return e}},k=a(7),b=a.n(k),y=a(15),O="https://uxcandy.com/~shapoval/test-task-backend";function _(e){return N.apply(this,arguments)}function N(){return(N=Object(y.a)(b.a.mark(function e(t){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.then(function(e){return e.json()},function(e){return{code:504,message:"Server timeout"}}).catch(function(){return t}).then(function(e){return e instanceof Response===!1?e:{status:"error",message:e.statusText}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function j(e){return w.apply(this,arguments)}function w(){return(w=Object(y.a)(b.a.mark(function e(t){var a,n,r,s,c,i,l,o;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.path,n=t.method,r=void 0===n?"GET":n,s=t.postData,c=t.getParams,r=r.toUpperCase(),i=Object.assign({method:r},"POST"===r?{body:JSON.stringify(s)}:{}),l=O+a+("GET"===r&&c?"?"+encodeURI(Object.entries(c).map(function(e){return"".concat(e[0],"=").concat(e[1])}).join("&")):""),o=fetch(l,i),e.next=7,_(o);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var C={get:function(){var e=Object(y.a)(b.a.mark(function e(){var t,a,n=arguments;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:1,a=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,j({path:"/",getParams:Object(d.a)({developer:"Name",page:t},a)});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},S="REQUEST_TASKS",T="RECEIVE_TASKS",x="SET_TASKS_SORT";function L(e,t){return{type:T,payload:Object(d.a)({},t,{page:e})}}function F(e){return function(){var t=Object(y.a)(b.a.mark(function t(a,n){var r,s,c,i,l,o;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:S}),r=n(),s=r.tasksState,c=s.pagination,i=s.sort,l="undefined"!=typeof e?e:c.page,t.next=5,C.get(l,i||{});case 5:o=t.sent,a(L(l,o));case 7:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()}function P(){return function(e,t){var a,n=t().tasksState;!(a=n).isFetching&&(!a.items||a.didInvalidate||a.lastUpdate<Date.now()-6e4)&&e(F())}}function U(e){return function(t){t(function(e){return{type:x,payload:e}}(e)),t(F())}}var D={items:null,isFetching:!1,lastUpdate:null,didInvalidate:!1,sort:null,pagination:{page:1},error:null},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(d.a)({},e,{isFetching:!0});case T:var a={isFetching:!1,didInvalidate:!1,lastUpdate:Date.now(),pagination:Object(d.a)({},e.pagination,{page:t.payload.page})};return(t.payload.status=!1)?Object(d.a)({},e,a,{error:t.payload.message,items:null}):Object(d.a)({},e,a,{error:null,items:t.payload.message.tasks,pagination:Object(d.a)({},a.pagination,{total:Math.floor(t.payload.message.total_task_count/3)})});case x:var n={sort_field:t.payload,sort_direction:e.sort&&e.sort.sort_field===t.payload&&"asc"===e.sort.sort_direction?"desc":"asc"};return Object(d.a)({},e,{sort:Object(d.a)({},n)});default:return e}},R=Object(u.c)({loggedCustomerState:v,tasksState:I}),G=[p.a],A=Object(u.d)(R,void 0,u.a.apply(void 0,G)),M=a(8),B=a(9),J=a(11),K=a(10),W=a(12),Q=a(74),V=a(18),$=(a(60),a(62),a(17));var q=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(J.a)(this,Object(K.a)(t).call(this,e))).updateState=function(e){a.setState(Object($.a)({},e.target.name,e.target.value))},a.doLogout=function(){(0,a.props.dispatch)({type:g})},a.doLogin=function(e){e.preventDefault();var t=a.state,n=t.name,r=t.password;if("admin"===n&&"123"===r){var s=a.props.dispatch;s({type:h}),setTimeout(function(){s({type:f,payload:{name:"Admin",login:"admin",role:"admin"}})},3e3)}else V.toast.error("Credentials uncorrect")},a.state={name:"",password:""},a}return Object(W.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.customer,t=this.state,a=t.name,n=t.password;return r.a.createElement(r.a.Fragment,null,e?r.a.createElement("span",{className:"navbar-text float-right"},e.name,r.a.createElement("a",{href:"/logout",onClick:this.doLogout}," Logout")):r.a.createElement("form",{className:"form-inline my-2 my-lg-0",onSubmit:this.doLogin},r.a.createElement("input",{id:"name",className:"form-control mr-sm-2",type:"text",name:"name",placeholder:"Login",onChange:this.updateState}),r.a.createElement("input",{id:"password",className:"form-control mr-sm-2",type:"password",name:"password",placeholder:"Password",onChange:this.updateState}),r.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit",disabled:!(a&&n)},"Login")))}}]),t}(n.Component),z=Object(m.b)(function(e){var t=e.loggedCustomerState.customer;return{customer:void 0===t?null:t}})(q),H=a(72),X=function(){return r.a.createElement("header",null,r.a.createElement("nav",{className:"navbar navbar-light bg-light"},r.a.createElement(H.a,{className:"navbar-brand",to:"/"},"BrandName"),r.a.createElement(z,null)))},Y=function(){return r.a.createElement("div",null,"Copyrights 2018")},Z=(a(64),function(e){var t=e.dark,a=e.relative;return r.a.createElement("div",{className:"loading"+(t?" m-dark":"")+(a?" m-relative":"")},r.a.createElement("div",{className:"signal"}))}),ee=(a(66),function(e,t){for(var a=[],n=1;n<=t;n++)(n<=e&&n>e-3||n>=e&&n<e+3)&&a.push(n);return a}),te=function(e){var t=e.pagination,a=e.loadPage,n=t.page,s=t.total,c=ee(n,s);return r.a.createElement("nav",{"aria-label":"Page navigation example"},r.a.createElement("ul",{className:"pagination"},1!==n&&r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{className:"page-link",href:"#",onClick:function(){return a(1)}},"First")),r.a.createElement("li",{className:"page-item d-none d-md-block".concat(1==n?" disabled":"")},r.a.createElement("a",{className:"page-link",href:"#",onClick:function(){return a(n-1)}},"Previous")),c[0]>1&&r.a.createElement("li",{className:"page-item d-none d-md-block disabled"},r.a.createElement("a",{className:"page-link",href:"#"},"...")),c.map(function(e){return r.a.createElement("li",{key:e,className:"page-item".concat(n===e?" active":"")},r.a.createElement("a",{className:"page-link",href:"#",onClick:function(){return a(e)}},e))}),c[c.length-1]<s&&r.a.createElement("li",{className:"page-item d-none d-md-block disabled"},r.a.createElement("a",{className:"page-link",href:"#"},"...")),r.a.createElement("li",{className:"page-item d-none d-md-block".concat(n==s?" disabled":"")},r.a.createElement("a",{className:"page-link",href:"#",onClick:function(){return a(n+1)}},"Next")),n!=s&&r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{className:"page-link",href:"#",onClick:function(){return a(s)}},"Last"))))};var ae=function(e){function t(){var e,a;Object(M.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(J.a)(this,(e=Object(K.a)(t)).call.apply(e,[this].concat(r)))).loadPage=function(e){(0,a.props.dispatch)(F(e))},a.viewTask=function(e){a.props.history.push("/task/"+e)},a.sortTasks=function(e){(0,a.props.dispatch)(U(e))},a}return Object(W.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(P())}},{key:"render",value:function(){var e=this,t=this.props,a=t.tasks,n=t.pagination,s=t.isFetching;return r.a.createElement("div",{className:"task-list"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Task list"),r.a.createElement("ul",{className:"task-list__list"},r.a.createElement("li",{className:"task-list__title"},r.a.createElement("div",{className:"task-list__status"},r.a.createElement("a",{href:"#",onClick:function(){return e.sortTasks("state")}},"St")),r.a.createElement("div",{className:"task-list__name"},r.a.createElement("a",{href:"#",onClick:function(){return e.sortTasks("username")}},"User name")),r.a.createElement("div",{className:"task-list__email"},r.a.createElement("a",{href:"#",onClick:function(){return e.sortTasks("email")}},"Email")),r.a.createElement("div",{className:"task-list__text"},"Text"),r.a.createElement("div",{className:"task-list__id"},r.a.createElement("a",{href:"#",onClick:function(){return e.sortTasks("id")}},"ID"))),a.map(function(t,a){return r.a.createElement("li",{key:t.id,className:"task-list__item",onClick:function(){return e.viewTask(a)}},r.a.createElement("div",{className:"task-list__status"},r.a.createElement("input",{type:"checkbox",checked:t.status,disabled:!0})),r.a.createElement("div",{className:"task-list__name"},t.username),r.a.createElement("div",{className:"task-list__email"},t.email),r.a.createElement("div",{className:"task-list__text"},t.text),r.a.createElement("div",{className:"task-list__id"},t.id))})),r.a.createElement(te,{pagination:n,loadPage:this.loadPage})):r.a.createElement("div",null,s?"":"Task list is empty"),s&&r.a.createElement("div",null,"Loading..."))}}]),t}(n.Component),ne=Object(m.b)(function(e){var t=e.tasksState;return{tasks:t.items,pagination:t.pagination,isFetching:t.isFetching,sort:t.sort}})(ae);a(68);var re=function(e){function t(){return Object(M.a)(this,t),Object(J.a)(this,Object(K.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(B.a)(t,[{key:"componentWillMount",value:function(){this.props.task||this.props.history.replace("/")}},{key:"render",value:function(){var e=this.props,t=e.task,a=e.history;return t?r.a.createElement("div",{className:"task-item"},r.a.createElement("h1",null,"Task"),r.a.createElement("div",{className:"task-item__content"},r.a.createElement("p",null,r.a.createElement("span",{className:"task-item__title"},"id:")," ",t.id),r.a.createElement("p",null,r.a.createElement("span",{className:"task-item__title"},"username:")," ",t.username),r.a.createElement("p",null,r.a.createElement("span",{className:"task-item__title"},"email:")," ",t.email),r.a.createElement("p",null,r.a.createElement("span",{className:"task-item__title"},"text:")," ",t.text),r.a.createElement("p",null,r.a.createElement("span",{className:"task-item__title"},"image")),r.a.createElement("img",{src:t.image_path,alt:""})),r.a.createElement("nav",null,r.a.createElement("a",{href:"#",onClick:function(){return a.goBack()}},"Back"))):null}}]),t}(n.Component),se=Object(m.b)(function(e,t){var a=e.tasksState,n=t.task,r=t.match.params.id;return{task:n||a.items&&a.items[r]}})(re);var ce=function(e){function t(){return Object(M.a)(this,t),Object(J.a)(this,Object(K.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.pending;return r.a.createElement(r.a.Fragment,null,r.a.createElement(X,null),r.a.createElement("div",{className:"container main-content"},r.a.createElement(l.a,null,r.a.createElement(o.a,{path:"/",exact:!0,component:ne}),r.a.createElement(o.a,{path:"/task/:id",component:se}),r.a.createElement(Q.a,{to:"/"}))),r.a.createElement(Y,null),r.a.createElement(V.ToastContainer,{autoClose:2e3}),e&&r.a.createElement(Z,{dark:!0}))}}]),t}(n.Component),ie=Object(m.b)(function(e){return{pending:e.loggedCustomerState.pending}})(ce),le=function(){return r.a.createElement(m.a,{store:A},r.a.createElement(i.a,null,r.a.createElement(l.a,null,r.a.createElement(o.a,{path:"/",component:ie}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[35,2,1]]]);
//# sourceMappingURL=main.2031bc31.chunk.js.map